(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{460:function(e,t,s){Promise.resolve().then(s.bind(s,316))},316:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var n=s(7437),l=s(2265),a=s(7218),i=s(8759),components_Footer=()=>(0,n.jsxs)("footer",{className:"chatbot-text-tertiary flex justify-between text-sm mt-6",children:[(0,n.jsx)("a",{href:"/student/skills",className:"flex h-8 w-max flex-none items-center justify-center border rounded-md text-xs px-3","aria-label":"Back to Skills",style:{backgroundColor:"#388a91",color:"#FFFFFF"},children:"Back to Skills"}),(0,n.jsx)("div",{className:"ml-auto flex flex-row items-center",children:(0,n.jsx)("img",{src:"/images/eduflow_logo.svg",alt:"EduFlow logo",style:{height:"40px"}})})]}),r=s(7311),c=s(4033);function debounce(e,t){let s;return function(){for(var n=arguments.length,l=Array(n),a=0;a<n;a++)l[a]=arguments[a];clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...l)},t)}}let getRelevantChangeIndicator=e=>e.length;function Home(){let{messages:e,input:t,handleInputChange:s,handleSubmit:o}=(0,i.RJ)(),d=getRelevantChangeIndicator(e),m=(0,l.useRef)(null),[h,u]=(0,l.useState)("asking"),[x,f]=(0,l.useState)({id:"",email_address:"",subject:"",skill:"",mastery_score:0,retention_score:0,need_to_revise:!1,decay_value:.5}),p=(0,c.useSearchParams)(),g=p.get("_id"),fetchStudentSkill=async()=>{try{let e=await fetch("/api/getStudentSkill",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:g})}),t=await e.json();f(t)}catch(e){console.error("Error fetching student skill:",e)}};(0,l.useEffect)(()=>{fetchStudentSkill()},[]),(0,l.useEffect)(()=>{fetchStudentSkill()},[d]);let handleDependencies=e=>{if(e.areDependenciesValid);else{for(var t="Warning, before you continue, you aren't yet proficient enough in the following dependencies::\n",s=0;s<e.invalidDependencies.length;s++)t+="".concat(e.invalidDependencies[s],"\nWe recommend you practice these skills more before continuing");alert(t)}},y=(0,l.useCallback)(async()=>{if(!x.email_address||!x.skill){console.log("Skipping dependency check - email or skill is undefined or empty");return}try{let e=await fetch("/api/checkDependencies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x.email_address,skill:x.skill})}),t=await e.json();handleDependencies(t)}catch(e){console.error("Error fetching dependencies:",e)}},[x.email_address,x.skill]),j=(0,l.useCallback)(debounce(y,500),[y]);return(0,l.useEffect)(()=>{j()},[j]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("main",{className:"flex h-screen flex-col items-center justify-center",children:(0,n.jsxs)("section",{className:"chatbot-section flex flex-col origin:w-[800px] w-full origin:h-[735px] h-full rounded-md p-2 md:p-6",children:[(0,n.jsxs)("div",{className:"chatbot-header pb-6",children:[(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("h1",{className:"chatbot-text-primary text-xl md:text-2xl font-medium",style:{marginBottom:"15px"},children:x.skill})})}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(r.Z,{score:x.mastery_score,width:"200px",backgroundColor:"#388a91"})})}),(0,n.jsx)("p",{className:"chatbot-text-secondary-inverse text-sm md:text-base mt-2 md:mt-4",children:"When you are ready, say that you're ready, and you will be asked a question. Provide an answer, and you will receive some feedback on your answer. After you've read your feedback, say you're ready for the next question to go again and increase your mastery!"})]}),(0,n.jsx)("div",{className:"flex-1 relative overflow-y-auto my-4 md:my-6",children:(0,n.jsx)("div",{className:"absolute w-full overflow-x-hidden",children:e.map((e,t)=>(0,n.jsx)(a.Z,{ref:m,content:e},"message-".concat(t)))})}),(0,n.jsxs)("form",{className:"flex h-[40px] gap-2",onSubmit:e=>{o(e,{options:{body:{llm:"gpt-4",chatState:h,email:x.email_address,skill:x.skill}}}),"asking"===h?u("waiting"):"waiting"===h&&u("asking")},children:[(0,n.jsx)("input",{onChange:s,value:t,className:"chatbot-input flex-1 text-sm md:text-base outline-none bg-transparent rounded-md p-2",placeholder:"Send a message..."}),(0,n.jsxs)("button",{type:"submit",className:"chatbot-send-button flex rounded-md items-center justify-center px-2.5 origin:px-3",style:{backgroundColor:"#388a91"},children:[(0,n.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{d:"M2.925 5.025L9.18333 7.70833L2.91667 6.875L2.925 5.025ZM9.175 12.2917L2.91667 14.975V13.125L9.175 12.2917ZM1.25833 2.5L1.25 8.33333L13.75 10L1.25 11.6667L1.25833 17.5L18.75 10L1.25833 2.5Z"})}),(0,n.jsx)("span",{className:"hidden origin:block font-semibold text-sm ml-2",children:"Send"})]})]}),(0,n.jsx)(components_Footer,{})]})})})}},7218:function(e,t,s){"use strict";var n=s(7437),l=s(1396),a=s.n(l),i=s(2265),r=s(939),c=s(8809);let o=(0,i.forwardRef)(function(e,t){let{content:s}=e,{role:l}=s,i="user"===l;return(0,n.jsxs)("div",{ref:t,className:"block mt-4 md:mt-6 pb-[7px] clear-both ".concat(i?"float-right":"float-left"),children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)("div",{className:"talk-bubble".concat(i?" user":""," p-2 md:p-4"),children:[s.processing?(0,n.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,n.jsx)("div",{className:"dot-flashing"})}):(0,n.jsx)(r.U,{remarkPlugins:[c.Z],components:{code(e){let{node:t,children:s,...l}=e;return(0,n.jsx)("code",{...l,children:s})}},children:null==s?void 0:s.content}),(0,n.jsx)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M0.730278 0.921112C-3.49587 0.921112 12 0.921112 12 0.921112V5.67376C12 6.8181 9.9396 7.23093 9.31641 6.27116C6.83775 2.45382 3.72507 0.921112 0.730278 0.921112Z"})})]})}),s.url?(0,n.jsx)("div",{className:"flex justify-end mt-3",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm",children:"Source:"}),(0,n.jsx)(a(),{href:null==s?void 0:s.url,target:"_blank",children:(0,n.jsxs)("div",{className:"chatbot-faq-link flex items-center px-2 py-0.5",children:[(0,n.jsx)("svg",{width:"14",height:"7",viewBox:"0 0 14 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.3333 0.127197H7.66665V1.46053H10.3333C11.4333 1.46053 12.3333 2.36053 12.3333 3.46053C12.3333 4.56053 11.4333 5.46053 10.3333 5.46053H7.66665V6.79386H10.3333C12.1733 6.79386 13.6666 5.30053 13.6666 3.46053C13.6666 1.62053 12.1733 0.127197 10.3333 0.127197ZM6.33331 5.46053H3.66665C2.56665 5.46053 1.66665 4.56053 1.66665 3.46053C1.66665 2.36053 2.56665 1.46053 3.66665 1.46053H6.33331V0.127197H3.66665C1.82665 0.127197 0.333313 1.62053 0.333313 3.46053C0.333313 5.30053 1.82665 6.79386 3.66665 6.79386H6.33331V5.46053ZM4.33331 2.79386H9.66665V4.1272H4.33331V2.79386Z"})}),(0,n.jsx)("span",{className:"text-xs font-semibold pl-1.5",children:"Astra DB FAQs"})]})})]})}):null]})});t.Z=o},7311:function(e,t,s){"use strict";var n=s(7437);s(2265),t.Z=e=>{let{score:t,width:s="100%",height:l="20px",backgroundColor:a="green",borderRadius:i="8px",color:r="white",lineHeight:c="20px"}=e;return(0,n.jsx)("div",{className:"progress-bar-container",style:{width:s,backgroundColor:"#e0e0e0",borderRadius:i},children:(0,n.jsx)("div",{className:"progress-bar-fill",style:{height:l,width:"".concat(Math.min(t,100),"%"),backgroundColor:a,borderRadius:i,color:r,lineHeight:c,transition:"width 0.5s ease"}})})}}},function(e){e.O(0,[326,105,971,472,744],function(){return e(e.s=460)}),_N_E=e.O()}]);